# DeepSearch Agent Configuration - Using Standard Distri Agent
# This demonstrates how to create a research agent using YAML configuration

server:
  host: "127.0.0.1"
  port: 8080
  documentation_url: "https://github.com/distrihub/distri"
  preferred_transport: "JSONRPC"

  capabilities:
    streaming: true
    push_notifications: true
    state_transition_history: true
    extensions: []

  default_input_modes:
    - "text/plain"
    - "text/markdown"

  default_output_modes:
    - "text/plain"
    - "text/markdown"

  security_schemes: {}
  security: []

# Agent definitions
agents:
  - name: "deep_search"
    description: "An intelligent research agent that combines web search and scraping for comprehensive answers"
    model: "gpt-4o-mini"
    system_prompt: |
      You are DeepSearch, an intelligent research agent with access to web search and scraping tools.
      
      When a user asks a question:
      1. First, use the 'search' tool to find relevant web sources related to their query
      2. Then, use the 'scrape' tool to extract detailed content from the most promising URLs
      3. Finally, synthesize all the information into a comprehensive, well-structured response
      
      Always:
      - Cite your sources with URLs
      - Provide multiple perspectives when relevant
      - Structure your response with clear headings
      - Focus on accuracy and completeness
      
      Available tools:
      - search: Search the web using Tavily API
      - scrape: Extract content from specific URLs using spider
    icon_url: "https://example.com/deep-search-icon.png"
    mcp_servers:
      - name: "mcp-tavily"
        filter: "all"
        type: "tool"
      - name: "mcp-spider" 
        filter: "all"
        type: "tool"
    parameters:
      max_search_results: 5
      max_scrape_sources: 3
    max_iterations: 8

# MCP server configurations
mcp_servers:
  - name: "mcp-tavily"
    config:
      transport:
        type: "stdio"
        command: "mcp-tavily"
        args: []
        env_vars:
          TAVILY_API_KEY: "${TAVILY_API_KEY}"
      metadata:
        description: "Web search using Tavily API"
        version: "1.0.0"

  - name: "mcp-spider"
    config:
      transport:
        type: "stdio"
        command: "mcp-spider"
        args: ["--stealth-mode"]
        env_vars: {}
      metadata:
        description: "Web scraping using spider-rs"
        version: "1.0.0"

# Logging configuration
logging:
  level: "info"
  verbose: true